import{r as t}from"./index-Bv95bFYi.js";var k=["light","dark"],E="(prefers-color-scheme: dark)",N=typeof window>"u",x=t.createContext(void 0),j={setTheme:e=>{},themes:[]},K=()=>{var e;return(e=t.useContext(x))!=null?e:j},H=e=>t.useContext(x)?e.children:t.createElement(z,{...e}),_=["light","dark"],z=({forcedTheme:e,disableTransitionOnChange:i=!1,enableSystem:n=!0,enableColorScheme:S=!0,storageKey:c="theme",themes:l=_,defaultTheme:a=n?"system":"light",attribute:v="data-theme",value:h,children:b,nonce:p})=>{let[o,m]=t.useState(()=>I(c,a)),[T,d]=t.useState(()=>I(c)),g=h?Object.values(h):l,C=t.useCallback(r=>{let s=r;if(!s)return;r==="system"&&n&&(s=M());let $=h?h[s]:s,L=i?J():null,w=document.documentElement;if(v==="class"?(w.classList.remove(...g),$&&w.classList.add($)):$?w.setAttribute(v,$):w.removeAttribute(v),S){let O=k.includes(a)?a:null,A=k.includes(s)?s:O;w.style.colorScheme=A}L?.()},[]),u=t.useCallback(r=>{let s=typeof r=="function"?r(r):r;m(s);try{localStorage.setItem(c,s)}catch{}},[e]),f=t.useCallback(r=>{let s=M(r);d(s),o==="system"&&n&&!e&&C("system")},[o,e]);t.useEffect(()=>{let r=window.matchMedia(E);return r.addListener(f),f(r),()=>r.removeListener(f)},[f]),t.useEffect(()=>{let r=s=>{if(s.key!==c)return;let $=s.newValue||a;u($)};return window.addEventListener("storage",r),()=>window.removeEventListener("storage",r)},[u]),t.useEffect(()=>{C(e??o)},[e,o]);let y=t.useMemo(()=>({theme:o,setTheme:u,forcedTheme:e,resolvedTheme:o==="system"?T:o,themes:n?[...l,"system"]:l,systemTheme:n?T:void 0}),[o,u,e,T,n,l]);return t.createElement(x.Provider,{value:y},t.createElement(D,{forcedTheme:e,disableTransitionOnChange:i,enableSystem:n,enableColorScheme:S,storageKey:c,themes:l,defaultTheme:a,attribute:v,value:h,children:b,attrs:g,nonce:p}),b)},D=t.memo(({forcedTheme:e,storageKey:i,attribute:n,enableSystem:S,enableColorScheme:c,defaultTheme:l,value:a,attrs:v,nonce:h})=>{let b=l==="system",p=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${v.map(d=>`'${d}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,o=c?k.includes(l)&&l?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(d,g=!1,C=!0)=>{let u=a?a[d]:d,f=g?d+"|| ''":`'${u}'`,y="";return c&&C&&!g&&k.includes(d)&&(y+=`d.style.colorScheme = '${d}';`),n==="class"?g||u?y+=`c.add(${f})`:y+="null":u&&(y+=`d[s](n,${f})`),y},T=e?`!function(){${p}${m(e)}}()`:S?`!function(){try{${p}var e=localStorage.getItem('${i}');if('system'===e||(!e&&${b})){var t='${E}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}${b?"":"else{"+m(l,!1,!1)+"}"}${o}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${i}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}else{${m(l,!1,!1)};}${o}}catch(t){}}();`;return t.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:T}})}),I=(e,i)=>{if(N)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||i},J=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},M=e=>(e||(e=window.matchMedia(E)),e.matches?"dark":"light");const Q=()=>{const{theme:e,systemTheme:i}=K();return e==="dark"||e==="system"&&i==="dark"};export{Q as u,H as z};
